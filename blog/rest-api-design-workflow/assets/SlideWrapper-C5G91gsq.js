import{ac as de,L as wt,ad as fe,r as O,B as I,y as pe,Z as ne,p as ve,M as re,d as vt,f as st,i as se,z as V,o as Q,ae as ge,T as me,Q as xe,af as G,k as U,g as X,j as Dt,F as ye,h as gt,H as we,n as _e,e as jt,b as be,C as Se}from"./modules/vue-B-tzo7fb.js";import{j as $t,p as St,X as _t,Y as It,Z as Pe,$ as Ee,a0 as J,a1 as Me,a2 as $e,g as Ce,a3 as Nt,a4 as qt,a5 as Tt,a6 as zt,w as ke,a as Ae,a7 as Le,_ as Ct,f as De,d as je,h as Ie,e as Ne,i as qe,b as Te,a8 as ze}from"./index-DgcDMPbt.js";import{u as Fe}from"./slidev/context-5Pjekiqt.js";import{a as Oe,g as Re}from"./modules/file-saver-CFlxSFu6.js";var Xe=Object.defineProperty,Ft=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable,Ot=(t,e,r)=>e in t?Xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pt=(t,e)=>{for(var r in e||(e={}))Be.call(e,r)&&Ot(t,r,e[r]);if(Ft)for(var r of Ft(e))Ke.call(e,r)&&Ot(t,r,e[r]);return t},Ge=()=>({emit(t,...e){for(let r=this.events[t]||[],i=0,o=r.length;i<o;i++)r[i](...e)},events:{},on(t,e){var r;return((r=this.events)[t]||(r[t]=[])).push(e),()=>{var i;this.events[t]=(i=this.events[t])==null?void 0:i.filter(o=>e!==o)}}});function ft(t,e){return t-e}function Ue(t){return t<0?-1:1}function pt(t){return[Math.abs(t),Ue(t)]}function ie(){const t=()=>((1+Math.random())*65536|0).toString(16).substring(1);return`${t()+t()}-${t()}-${t()}-${t()}-${t()}${t()}${t()}`}var Ve=2,R=Ve;function oe(t,e){const r=document.createElementNS("http://www.w3.org/2000/svg","defs"),i=document.createElementNS("http://www.w3.org/2000/svg","marker"),o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("fill",e),i.setAttribute("id",t),i.setAttribute("viewBox","0 -5 10 10"),i.setAttribute("refX","5"),i.setAttribute("refY","0"),i.setAttribute("markerWidth","4"),i.setAttribute("markerHeight","4"),i.setAttribute("orient","auto"),o.setAttribute("d","M0,-5L10,0L0,5"),i.appendChild(o),r.appendChild(i),r}function He(t,e){const r=t.x-e.x,i=t.y-e.y;return r*r+i*i}function Ze(t,e,r){let i=e.x,o=e.y,u=r.x-i,f=r.y-o;if(u!==0||f!==0){const s=((t.x-i)*u+(t.y-o)*f)/(u*u+f*f);s>1?(i=r.x,o=r.y):s>0&&(i+=u*s,o+=f*s)}return u=t.x-i,f=t.y-o,u*u+f*f}function Ye(t,e){let r=t[0];const i=[r];let o;for(let u=1,f=t.length;u<f;u++)o=t[u],He(o,r)>e&&(i.push(o),r=o);return r!==o&&o&&i.push(o),i}function Et(t,e,r,i,o){let u=i,f=0;for(let s=e+1;s<r;s++){const n=Ze(t[s],t[e],t[r]);n>u&&(f=s,u=n)}u>i&&(f-e>1&&Et(t,e,f,i,o),o.push(t[f]),r-f>1&&Et(t,f,r,i,o))}function Qe(t,e){const r=t.length-1,i=[t[0]];return Et(t,0,r,e,i),i.push(t[r]),i}function Rt(t,e,r=!1){if(t.length<=2)return t;const i=e*e;return t=r?t:Ye(t,i),t=Qe(t,i),t}var W=class{constructor(t){this.drauu=t,this.event=void 0,this.point=void 0,this.start=void 0,this.el=null}onSelected(t){}onUnselected(){}onStart(t){}onMove(t){return!1}onEnd(t){}get brush(){return this.drauu.brush}get shiftPressed(){return this.drauu.shiftPressed}get altPressed(){return this.drauu.altPressed}get svgElement(){return this.drauu.el}getMousePosition(t){var e,r,i,o;const u=this.drauu.el,f=(e=this.drauu.options.cssZoom)!=null?e:1,s=(r=this.drauu.options.coordinateScale)!=null?r:1,n=(i=this.drauu.options.offset)!=null?i:{x:0,y:0};if(this.drauu.options.coordinateTransform===!1){const a=this.drauu.el.getBoundingClientRect();return{x:(t.pageX/f-a.left+n.x)*s,y:(t.pageY/f-a.top+n.y)*s,pressure:t.pressure}}else{const a=this.drauu.svgPoint;a.x=t.clientX/f+n.x,a.y=t.clientY/f+n.y;const d=a.matrixTransform((o=u.getScreenCTM())==null?void 0:o.inverse());return{x:d.x*s,y:d.y*s,pressure:t.pressure}}}createElement(t,e){var r;const i=document.createElementNS("http://www.w3.org/2000/svg",t),o=e?Pt(Pt({},this.brush),e):this.brush;return i.setAttribute("fill",(r=o.fill)!=null?r:"transparent"),i.setAttribute("stroke",o.color),i.setAttribute("stroke-width",o.size.toString()),i.setAttribute("stroke-linecap","round"),o.dasharray&&i.setAttribute("stroke-dasharray",o.dasharray),i}attr(t,e){this.el.setAttribute(t,typeof e=="string"?e:e.toFixed(R))}_setEvent(t){this.event=t,this.point=this.getMousePosition(t)}_eventDown(t){return this._setEvent(t),this.start=this.point,this.onStart(this.point)}_eventMove(t){return this._setEvent(t),this.onMove(this.point)}_eventUp(t){return this._setEvent(t),this.onEnd(this.point)}},Je=class Z extends W{constructor(){super(...arguments),this.points=[],this.count=0}onStart(e){if(this.el=this.createElement("path",{fill:"transparent"}),this.points=[e],this.brush.arrowEnd){this.arrowId=ie();const r=oe(this.arrowId,this.brush.color);this.el.appendChild(r)}return this.el}onMove(e){return this.el||this.onStart(e),this.points[this.points.length-1]!==e&&(this.points.push(e),this.count+=1),this.count>5&&(this.points=Rt(this.points,1,!0),this.count=0),this.attr("d",Z.toSvgData(this.points)),!0}onEnd(){const e=this.el;if(this.el=null,!e)return!1;if(e.setAttribute("d",Z.toSvgData(Rt(this.points,1,!0))),!e.getTotalLength()){const{x:r,y:i}=this.points[0],o=this.brush.size/2;e.setAttribute("d",`M ${r-o} ${i} a ${o},${o} 0 1,0 ${o*2},0 a ${o},${o} 0 1,0 ${-o*2},0`),e.setAttribute("fill",this.brush.color),e.setAttribute("stroke-width","0")}return!0}static line(e,r){const i=r.x-e.x,o=r.y-e.y;return{length:Math.sqrt(i**2+o**2),angle:Math.atan2(o,i)}}static controlPoint(e,r,i,o){const u=r||e,f=i||e,s=.2,n=Z.line(u,f),a=n.angle+(o?Math.PI:0),d=n.length*s,l=e.x+Math.cos(a)*d,c=e.y+Math.sin(a)*d;return{x:l,y:c}}static bezierCommand(e,r,i){const o=Z.controlPoint(i[r-1],i[r-2],e),u=Z.controlPoint(e,i[r-1],i[r+1],!0);return`C ${o.x.toFixed(R)},${o.y.toFixed(R)} ${u.x.toFixed(R)},${u.y.toFixed(R)} ${e.x.toFixed(R)},${e.y.toFixed(R)}`}static toSvgData(e){return e.reduce((r,i,o,u)=>o===0?`M ${i.x.toFixed(R)},${i.y.toFixed(R)}`:`${r} ${Z.bezierCommand(i,o,u)}`,"")}},We=class extends W{onStart(t){return this.el=this.createElement("ellipse"),this.attr("cx",t.x),this.attr("cy",t.y),this.el}onMove(t){if(!this.el||!this.start)return!1;let[e,r]=pt(t.x-this.start.x),[i,o]=pt(t.y-this.start.y);if(this.shiftPressed){const u=Math.min(e,i);e=u,i=u}if(this.altPressed)this.attr("cx",this.start.x),this.attr("cy",this.start.y),this.attr("rx",e),this.attr("ry",i);else{const[u,f]=[this.start.x,this.start.x+e*r].sort(ft),[s,n]=[this.start.y,this.start.y+i*o].sort(ft);this.attr("cx",(u+f)/2),this.attr("cy",(s+n)/2),this.attr("rx",(f-u)/2),this.attr("ry",(n-s)/2)}return!0}onEnd(){const t=this.el;if(this.el=null,!t)return!1;try{if(!t.getTotalLength())return!1}catch{return!1}return!0}},tn=class extends W{constructor(){super(...arguments),this.pathSubFactor=20,this.pathFragments=[],this._erased=[]}onSelected(t){const e=(r,i)=>{if(r&&r.length)for(let o=0;o<r.length;o++){const u=r[o];if(u.getTotalLength){const f=u.getTotalLength();for(let s=0;s<this.pathSubFactor;s++){const n=u.getPointAtLength(f*s/this.pathSubFactor),a=u.getPointAtLength(f*(s+1)/this.pathSubFactor);this.pathFragments.push({x1:n.x,x2:a.x,y1:n.y,y2:a.y,segment:s,element:i||u})}}else u.children&&e(u.children,u)}};t&&e(t.children)}onUnselected(){this.pathFragments=[]}onStart(t){this.svgPointPrevious=this.svgElement.createSVGPoint(),this.svgPointPrevious.x=t.x,this.svgPointPrevious.y=t.y}onMove(t){this.svgPointCurrent=this.svgElement.createSVGPoint(),this.svgPointCurrent.x=t.x,this.svgPointCurrent.y=t.y;const e=this.checkAndEraseElement();return this.svgPointPrevious=this.svgPointCurrent,e}onEnd(){this.svgPointPrevious=void 0,this.svgPointCurrent=void 0;const t=this._erased;return this._erased=[],{undo:()=>t.forEach(e=>this.drauu._restoreNode(e)),redo:()=>t.forEach(e=>this.drauu._removeNode(e))}}checkAndEraseElement(){if(this.pathFragments.length)for(let t=0;t<this.pathFragments.length;t++){const e=this.pathFragments[t];if(this.svgPointPrevious&&this.svgPointCurrent){const r={x1:this.svgPointPrevious.x,x2:this.svgPointCurrent.x,y1:this.svgPointPrevious.y,y2:this.svgPointCurrent.y};this.lineLineIntersect(e,r)&&(this.drauu._removeNode(e.element),this._erased.push(e.element))}}return this._erased.length&&(this.pathFragments=this.pathFragments.filter(t=>!this._erased.includes(t.element))),this._erased.length>0}lineLineIntersect(t,e){const r=t.x1,i=t.x2,o=e.x1,u=e.x2,f=t.y1,s=t.y2,n=e.y1,a=e.y2,d=(r-i)*(n-a)-(f-s)*(o-u),l=(r*s-f*i)*(o-u)-(r-i)*(o*a-n*u),c=(r*s-f*i)*(n-a)-(f-s)*(o*a-n*u),h=(p,x,y)=>p>=x&&p<=y?!0:p>=y&&p<=x;if(d===0)return!1;{const p={x:l/d,y:c/d};return h(p.x,r,i)&&h(p.y,f,s)&&h(p.x,o,u)&&h(p.y,n,a)}}},en=class extends W{onStart(t){if(this.el=this.createElement("line",{fill:"transparent"}),this.attr("x1",t.x),this.attr("y1",t.y),this.attr("x2",t.x),this.attr("y2",t.y),this.brush.arrowEnd){const e=ie(),r=document.createElementNS("http://www.w3.org/2000/svg","g");return r.append(oe(e,this.brush.color)),r.append(this.el),this.attr("marker-end",`url(#${e})`),r}return this.el}onMove(t){if(!this.el)return!1;let{x:e,y:r}=t;if(this.shiftPressed){const i=t.x-this.start.x,o=t.y-this.start.y;if(o!==0){let u=i/o;u=Math.round(u),Math.abs(u)<=1?(e=this.start.x+o*u,r=this.start.y+o):(e=this.start.x+i,r=this.start.y)}}return this.altPressed?(this.attr("x1",this.start.x*2-e),this.attr("y1",this.start.y*2-r),this.attr("x2",e),this.attr("y2",r)):(this.attr("x1",this.start.x),this.attr("y1",this.start.y),this.attr("x2",e),this.attr("y2",r)),!0}onEnd(){const t=this.el;if(this.el=null,!t)return!1;try{if(t.getTotalLength()<5)return!1}catch{return!1}return!0}},nn=class extends W{onStart(t){return this.el=this.createElement("rect"),this.brush.cornerRadius&&(this.attr("rx",this.brush.cornerRadius),this.attr("ry",this.brush.cornerRadius)),this.attr("x",t.x),this.attr("y",t.y),this.el}onMove(t){if(!this.el||!this.start)return!1;let[e,r]=pt(t.x-this.start.x),[i,o]=pt(t.y-this.start.y);if(this.shiftPressed){const u=Math.min(e,i);e=u,i=u}if(this.altPressed)this.attr("x",this.start.x-e),this.attr("y",this.start.y-i),this.attr("width",e*2),this.attr("height",i*2);else{const[u,f]=[this.start.x,this.start.x+e*r].sort(ft),[s,n]=[this.start.y,this.start.y+i*o].sort(ft);this.attr("x",u),this.attr("y",s),this.attr("width",f-u),this.attr("height",n-s)}return!0}onEnd(){const t=this.el;if(this.el=null,!t)return!1;try{if(!t.getTotalLength())return!1}catch{return!1}return!0}};function Xt(t,e,r,i=o=>o){return t*i(.5-e*(.5-r))}function rn(t){return[-t[0],-t[1]]}function z(t,e){return[t[0]+e[0],t[1]+e[1]]}function q(t,e){return[t[0]-e[0],t[1]-e[1]]}function T(t,e){return[t[0]*e,t[1]*e]}function sn(t,e){return[t[0]/e,t[1]/e]}function et(t){return[t[1],-t[0]]}function Bt(t,e){return t[0]*e[0]+t[1]*e[1]}function on(t,e){return t[0]===e[0]&&t[1]===e[1]}function an(t){return Math.hypot(t[0],t[1])}function ln(t){return t[0]*t[0]+t[1]*t[1]}function Kt(t,e){return ln(q(t,e))}function ae(t){return sn(t,an(t))}function un(t,e){return Math.hypot(t[1]-e[1],t[0]-e[0])}function nt(t,e,r){let i=Math.sin(r),o=Math.cos(r),u=t[0]-e[0],f=t[1]-e[1],s=u*o-f*i,n=u*i+f*o;return[s+e[0],n+e[1]]}function Mt(t,e,r){return z(t,T(q(e,t),r))}function Gt(t,e,r){return z(t,T(e,r))}var{min:Y,PI:cn}=Math,Ut=.275,rt=cn+1e-4;function hn(t,e={}){let{size:r=16,smoothing:i=.5,thinning:o=.5,simulatePressure:u=!0,easing:f=b=>b,start:s={},end:n={},last:a=!1}=e,{cap:d=!0,easing:l=b=>b*(2-b)}=s,{cap:c=!0,easing:h=b=>--b*b*b+1}=n;if(t.length===0||r<=0)return[];let p=t[t.length-1].runningLength,x=s.taper===!1?0:s.taper===!0?Math.max(r,p):s.taper,y=n.taper===!1?0:n.taper===!0?Math.max(r,p):n.taper,_=Math.pow(r*i,2),w=[],g=[],v=t.slice(0,10).reduce((b,j)=>{let M=j.pressure;if(u){let $=Y(1,j.distance/r),mt=Y(1,1-$);M=Y(1,b+(mt-b)*($*Ut))}return(b+M)/2},t[0].pressure),m=Xt(r,o,t[t.length-1].pressure,f),P,S=t[0].vector,E=t[0].point,L=E,k=E,C=L,N=!1;for(let b=0;b<t.length;b++){let{pressure:j}=t[b],{point:M,vector:$,distance:mt,runningLength:tt}=t[b];if(b<t.length-1&&p-tt<3)continue;if(o){if(u){let K=Y(1,mt/r),yt=Y(1,1-K);j=Y(1,v+(yt-v)*(K*Ut))}m=Xt(r,o,j,f)}else m=r/2;P===void 0&&(P=m);let ue=tt<x?l(tt/x):1,ce=p-tt<y?h((p-tt)/y):1;m=Math.max(.01,m*Math.min(ue,ce));let kt=(b<t.length-1?t[b+1]:t[b]).vector,xt=b<t.length-1?Bt($,kt):1,he=Bt($,S)<0&&!N,At=xt!==null&&xt<0;if(he||At){let K=T(et(S),m);for(let yt=1/13,it=0;it<=1;it+=yt)k=nt(q(M,K),M,rt*it),w.push(k),C=nt(z(M,K),M,rt*-it),g.push(C);E=k,L=C,At&&(N=!0);continue}if(N=!1,b===t.length-1){let K=T(et($),m);w.push(q(M,K)),g.push(z(M,K));continue}let Lt=T(et(Mt(kt,$,xt)),m);k=q(M,Lt),(b<=1||Kt(E,k)>_)&&(w.push(k),E=k),C=z(M,Lt),(b<=1||Kt(L,C)>_)&&(g.push(C),L=C),v=j,S=$}let A=t[0].point.slice(0,2),D=t.length>1?t[t.length-1].point.slice(0,2):z(t[0].point,[1,1]),B=[],F=[];if(t.length===1){if(!(x||y)||a){let b=Gt(A,ae(et(q(A,D))),-(P||m)),j=[];for(let M=1/13,$=M;$<=1;$+=M)j.push(nt(b,A,rt*2*$));return j}}else{if(!(x||y&&t.length===1))if(d)for(let j=1/13,M=j;M<=1;M+=j){let $=nt(g[0],A,rt*M);B.push($)}else{let j=q(w[0],g[0]),M=T(j,.5),$=T(j,.51);B.push(q(A,M),q(A,$),z(A,$),z(A,M))}let b=et(rn(t[t.length-1].vector));if(y||x&&t.length===1)F.push(D);else if(c){let j=Gt(D,b,m);for(let M=1/29,$=M;$<1;$+=M)F.push(nt(j,D,rt*3*$))}else F.push(z(D,T(b,m)),z(D,T(b,m*.99)),q(D,T(b,m*.99)),q(D,T(b,m)))}return w.concat(F,g.reverse(),B)}function dn(t,e={}){var r;let{streamline:i=.5,size:o=16,last:u=!1}=e;if(t.length===0)return[];let f=.15+(1-i)*.85,s=Array.isArray(t[0])?t:t.map(({x:h,y:p,pressure:x=.5})=>[h,p,x]);if(s.length===2){let h=s[1];s=s.slice(0,-1);for(let p=1;p<5;p++)s.push(Mt(s[0],h,p/4))}s.length===1&&(s=[...s,[...z(s[0],[1,1]),...s[0].slice(2)]]);let n=[{point:[s[0][0],s[0][1]],pressure:s[0][2]>=0?s[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],a=!1,d=0,l=n[0],c=s.length-1;for(let h=1;h<s.length;h++){let p=u&&h===c?s[h].slice(0,2):Mt(l.point,s[h],f);if(on(l.point,p))continue;let x=un(p,l.point);if(d+=x,h<c&&!a){if(d<o)continue;a=!0}l={point:p,pressure:s[h][2]>=0?s[h][2]:.5,vector:ae(q(l.point,p)),distance:x,runningLength:d},n.push(l)}return n[0].vector=((r=n[1])==null?void 0:r.vector)||[0,0],n}function fn(t,e={}){return hn(dn(t,e),e)}var pn=class le extends W{constructor(){super(...arguments),this.points=[]}onStart(e){return this.el=document.createElementNS("http://www.w3.org/2000/svg","path"),this.points=[e],this.attr("fill",this.brush.color),this.attr("d",this.getSvgData(this.points)),this.el}onMove(e){return this.el||this.onStart(e),this.points[this.points.length-1]!==e&&this.points.push(e),this.attr("d",this.getSvgData(this.points)),!0}onEnd(){const e=this.el;return this.el=null,!!e}getSvgData(e){return le.getSvgData(e,this.brush)}static getSvgData(e,r){const i=fn(e,Pt({size:r.size,thinning:.9,simulatePressure:!1,start:{taper:5},end:{taper:5}},r.stylusOptions));if(!i.length)return"";const o=i.reduce((u,[f,s],n,a)=>{const[d,l]=a[(n+1)%a.length];return u.push(f,s,(f+d)/2,(s+l)/2),u},["M",...i[0],"Q"]);return o.push("Z"),o.map(u=>typeof u=="number"?u.toFixed(2):u).join(" ")}};function vn(t){return{draw:new Je(t),stylus:new pn(t),line:new en(t),rectangle:new nn(t),ellipse:new We(t),eraseLine:new tn(t)}}var gn=class{constructor(t={}){this.options=t,this.el=null,this.svgPoint=null,this.eventEl=null,this.shiftPressed=!1,this.altPressed=!1,this.drawing=!1,this._emitter=Ge(),this._originalPointerId=null,this._models=vn(this),this._opStack=[],this._opIndex=0,this._disposables=[],this._elements=[],this.options.brush||(this.options.brush={color:"black",size:3,mode:"stylus"}),t.el&&this.mount(t.el,t.eventTarget,t.window)}get model(){return this._models[this.mode]}get mounted(){return!!this.el}get mode(){return this.options.brush.mode||"stylus"}set mode(t){this._models[this.mode].onUnselected(),this.options.brush.mode=t,this.model.onSelected(this.el)}get brush(){return this.options.brush}set brush(t){this.options.brush=t}resolveSelector(t){return typeof t=="string"?document.querySelector(t):t||null}mount(t,e,r=window){if(this.el)throw new Error("[drauu] already mounted, unmount previous target first");if(this.el=this.resolveSelector(t),!this.el)throw new Error("[drauu] target element not found");if(this.el.tagName.toLocaleLowerCase()!=="svg")throw new Error("[drauu] can only mount to a SVG element");if(!this.el.createSVGPoint)throw new Error("[drauu] SVG element must be create by document.createElementNS('http://www.w3.org/2000/svg', 'svg')");this.svgPoint=this.el.createSVGPoint();const i=this.resolveSelector(e)||this.el,o=this.eventStart.bind(this),u=this.eventMove.bind(this),f=this.eventEnd.bind(this),s=this.eventKeyboard.bind(this);i.addEventListener("pointerdown",o,{passive:!1}),r.addEventListener("pointermove",u,{passive:!1}),r.addEventListener("pointerup",f,{passive:!1}),r.addEventListener("pointercancel",f,{passive:!1}),r.addEventListener("keydown",s,!1),r.addEventListener("keyup",s,!1),this._disposables.push(()=>{i.removeEventListener("pointerdown",o),r.removeEventListener("pointermove",u),r.removeEventListener("pointerup",f),r.removeEventListener("pointercancel",f),r.removeEventListener("keydown",s,!1),r.removeEventListener("keyup",s,!1)}),this._emitter.emit("mounted")}unmount(){this._disposables.forEach(t=>t()),this._disposables.length=0,this._elements.length=0,this.el=null,this._emitter.emit("unmounted")}on(t,e){return this._emitter.on(t,e)}undo(){return!this.canUndo()||this.drawing?!1:(this._opStack[--this._opIndex].undo(),this._emitter.emit("changed"),!0)}redo(){return!this.canRedo()||this.drawing?!1:(this._opStack[this._opIndex++].redo(),this._emitter.emit("changed"),!0)}canRedo(){return this._opIndex<this._opStack.length}canUndo(){return this._opIndex>0}eventMove(t){!this.acceptsInput(t)||!this.drawing||this.model._eventMove(t)&&(t.stopPropagation(),t.preventDefault(),this._emitter.emit("changed"))}eventStart(t){this.acceptsInput(t)&&(t.stopPropagation(),t.preventDefault(),this._currentNode&&this.cancel(),this.drawing=!0,this._originalPointerId=t.pointerId,this._emitter.emit("start"),this._currentNode=this.model._eventDown(t),this._currentNode&&this.mode!=="eraseLine"&&this.el.appendChild(this._currentNode),this._emitter.emit("changed"))}eventEnd(t){if(!this.acceptsInput(t)||!this.drawing)return;const e=this.model._eventUp(t);if(!e)this.cancel();else if(e===!0){const r=this._currentNode;r&&(this._appendNode(r),this.commit({undo:()=>this._removeNode(r),redo:()=>this._restoreNode(r)}))}else this.commit(e);this.drawing=!1,this._emitter.emit("end"),this._emitter.emit("changed"),this._originalPointerId=null}acceptsInput(t){return(!this.options.acceptsInputTypes||this.options.acceptsInputTypes.includes(t.pointerType))&&!(this._originalPointerId&&this._originalPointerId!==t.pointerId)}eventKeyboard(t){this.shiftPressed===t.shiftKey&&this.altPressed===t.altKey||(this.shiftPressed=t.shiftKey,this.altPressed=t.altKey,this.model.point&&this.model.onMove(this.model.point)&&this._emitter.emit("changed"))}commit(t){this._opStack.length=this._opIndex,this._opStack.push(t),this._opIndex++;const e=this._currentNode;this._currentNode=void 0,this._emitter.emit("committed",e)}clear(){this._opStack.length=0,this._opIndex=0,this._elements=[],this.cancel(),this.el.innerHTML="",this._emitter.emit("changed")}cancel(){this._currentNode&&(this.el.removeChild(this._currentNode),this._currentNode=void 0,this._emitter.emit("canceled"))}dump(){return this.el.innerHTML}load(t){this.clear(),this.el.innerHTML=t}_appendNode(t){const e=this._elements.at(-1);e?e.after(t):this.el.append(t);const r=this._elements.push(t)-1;t.dataset.drauu_index=r.toString()}_removeNode(t){t.remove(),this._elements[+t.dataset.drauu_index]=null}_restoreNode(t){const e=+t.dataset.drauu_index;this._elements[e]=t;for(let r=e-1;r>=0;r--){const i=this._elements[r];if(i){i.after(t);return}}this.el.prepend(t)}};function mn(t){return new gn(t)}const xn=de(()=>{const{currentSlideNo:t,isPresenter:e}=$t(),r=["#ff595e","#ffca3a","#8ac926","#1982c4","#6a4c93","#ffffff","#000000"],i=wt("slidev-drawing-enabled",!1),o=wt("slidev-drawing-pinned",!1),u=fe(wt("slidev-drawing-brush",{color:r[0],size:4,mode:"stylus"})),f=O(!1),s=O(!1),n=O(!1),a=O(!1),d=O("stylus"),l=I(()=>St.drawings.syncAll||e.value);let c=!1;const h=I({get(){return d.value},set(g){d.value=g,g==="arrow"?(x.mode="line",u.arrowEnd=!0):(x.mode=g,u.arrowEnd=!1)}}),p=ne({brush:u,acceptsInputTypes:I(()=>i.value&&(!St.drawings.presenterOnly||e.value)?void 0:["pen"]),coordinateTransform:!1}),x=pe(mn(p));function y(){x.clear(),l.value&&It(t.value,"")}function _(){n.value=x.canRedo(),s.value=x.canUndo(),a.value=!!x.el?.children.length}function w(g){c=!0;const v=_t[g||t.value];v!=null?x.load(v):x.clear(),_(),c=!1}return x.on("changed",()=>{if(_(),!c){const g=x.dump(),v=t.value;(_t[v]||"")!==g&&l.value&&It(v,x.dump())}}),Ee(g=>{c=!0,g[t.value]!=null&&x.load(g[t.value]||""),c=!1,_()}),ve(()=>{re(t,()=>{x.mounted&&w()},{immediate:!0})}),x.on("start",()=>f.value=!0),x.on("end",()=>f.value=!1),window.addEventListener("keydown",g=>{if(!i.value||Pe.value)return;const v=!g.ctrlKey&&!g.altKey&&!g.shiftKey&&!g.metaKey;let m=!0;g.code==="KeyZ"&&(g.ctrlKey||g.metaKey)?g.shiftKey?x.redo():x.undo():g.code==="Escape"?i.value=!1:g.code==="KeyL"&&v?h.value="line":g.code==="KeyA"&&v?h.value="arrow":g.code==="KeyS"&&v?h.value="stylus":g.code==="KeyR"&&v?h.value="rectangle":g.code==="KeyE"&&v?h.value="ellipse":g.code==="KeyC"&&v?y():g.code.startsWith("Digit")&&v&&+g.code[5]<=r.length?u.color=r[+g.code[5]-1]:m=!1,m&&(g.preventDefault(),g.stopPropagation())},!1),{brush:u,brushColors:r,canClear:a,canRedo:n,canUndo:s,clear:y,drauu:x,drauuOptions:p,drawingEnabled:i,drawingMode:h,drawingPinned:o,drawingState:_t,isDrawing:f,loadCanvas:w}}),yn=["innerHTML"],dr=vt({__name:"DrawingPreview",props:{page:{}},setup(t){const{drawingState:e}=xn();return(r,i)=>V(e)[t.page]?(Q(),st("svg",{key:0,class:"w-full h-full absolute top-0 pointer-events-none",innerHTML:V(e)[t.page]},null,8,yn)):se("v-if",!0)}}),H=ne({});let wn=[],_n=[];J(H,"$syncUp",!0);J(H,"$syncDown",!0);J(H,"$paused",!1);J(H,"$onSet",t=>wn.push(t));J(H,"$onPatch",t=>_n.push(t));Me();J(H,"$patch",async()=>!1);const bn=$e(H,H,!0);window.navigator.userAgent.match(/Chrome\/(\d+)/)?.[1];window.navigator.userAgent.match(/Chrome\/(\d+)/)?.[1];class Sn{constructor(){this._screenshotSession=null}getSnapshot(e,r){const i=e+(r?"-dark":"-light"),o=bn.state[i];if(!o)return;const u=Ce(e);if(u&&o?.revision===u?.meta.slide.revision)return o.image}async saveSnapshot(e,r,i){return!1}async startCapturing(e){return!1}}const Pn=new Sn,En=["id"],Mn=["id"],$n={class:"slidev-slide-container w-full h-full relative"},Cn=["src"],kn=vt({__name:"SlideContainer",props:{width:{type:Number},meta:{default:()=>({})},isMain:{type:Boolean,default:!1},no:{type:Number,required:!1},useSnapshot:{type:Boolean,default:!1},contentStyle:{type:Object,default:()=>({})}},setup(t){const e=t,{isPrintMode:r}=$t(),i=O(null),o=ge(i),u=O(null),f=I(()=>e.width??o.width.value),s=I(()=>e.width?e.width/Nt.value:o.height.value),n=I(()=>qt.value&&!r.value?+qt.value:Math.min(f.value/Tt.value,s.value/zt.value)),a=I(()=>({...e.contentStyle,height:`${zt.value}px`,width:`${Tt.value}px`,"--slidev-slide-scale":n.value})),d=I(()=>e.width?{width:`${e.width}px`,height:`${e.width/Nt.value}px`}:{});if(e.isMain){const c=document.documentElement.style;me(()=>c.setProperty("--slidev-slide-scale",n.value.toString())),xe(()=>c.removeProperty("--slidev-slide-scale"))}G(Ae,n),G(Le,u);const l=I(()=>{if(!(e.no==null||!e.useSnapshot))return Pn.getSnapshot(e.no,ke.value)});return(c,h)=>l.value?(Q(),st(ye,{key:1},[se(" Image Snapshot "),X("div",$n,[X("img",{src:l.value,class:"w-full h-full object-cover",style:U(d.value)},null,12,Cn),h[0]||(h[0]=X("div",{absolute:"","bottom-1":"","right-1":"","p0.5":"","text-cyan:75":"","bg-cyan:10":"",rounded:"",title:"Snapshot"},[X("div",{class:"i-carbon-camera"})],-1))])],2112)):(Q(),st("div",{key:0,id:t.isMain?"slide-container":void 0,ref_key:"container",ref:i,class:"slidev-slide-container",style:U(d.value)},[X("div",{id:t.isMain?"slide-content":void 0,ref_key:"slideElement",ref:u,class:"slidev-slide-content",style:U(a.value)},[Dt(c.$slots,"default",{},void 0,!0)],12,Mn),Dt(c.$slots,"controls",{},void 0,!0)],12,En))}}),fr=Ct(kn,[["__scopeId","data-v-cff9fd75"]]);var ot={exports:{}},An=ot.exports,Vt;function Ln(){return Vt||(Vt=1,(function(t){(function(e,r,i){function o(n){var a=this,d=s();a.next=function(){var l=2091639*a.s0+a.c*23283064365386963e-26;return a.s0=a.s1,a.s1=a.s2,a.s2=l-(a.c=l|0)},a.c=1,a.s0=d(" "),a.s1=d(" "),a.s2=d(" "),a.s0-=d(n),a.s0<0&&(a.s0+=1),a.s1-=d(n),a.s1<0&&(a.s1+=1),a.s2-=d(n),a.s2<0&&(a.s2+=1),d=null}function u(n,a){return a.c=n.c,a.s0=n.s0,a.s1=n.s1,a.s2=n.s2,a}function f(n,a){var d=new o(n),l=a&&a.state,c=d.next;return c.int32=function(){return d.next()*4294967296|0},c.double=function(){return c()+(c()*2097152|0)*11102230246251565e-32},c.quick=c,l&&(typeof l=="object"&&u(l,d),c.state=function(){return u(d,{})}),c}function s(){var n=4022871197,a=function(d){d=String(d);for(var l=0;l<d.length;l++){n+=d.charCodeAt(l);var c=.02519603282416938*n;n=c>>>0,c-=n,c*=n,n=c>>>0,c-=n,n+=c*4294967296}return(n>>>0)*23283064365386963e-26};return a}r&&r.exports?r.exports=f:this.alea=f})(An,t)})(ot)),ot.exports}var at={exports:{}},Dn=at.exports,Ht;function jn(){return Ht||(Ht=1,(function(t){(function(e,r,i){function o(s){var n=this,a="";n.x=0,n.y=0,n.z=0,n.w=0,n.next=function(){var l=n.x^n.x<<11;return n.x=n.y,n.y=n.z,n.z=n.w,n.w^=n.w>>>19^l^l>>>8},s===(s|0)?n.x=s:a+=s;for(var d=0;d<a.length+64;d++)n.x^=a.charCodeAt(d)|0,n.next()}function u(s,n){return n.x=s.x,n.y=s.y,n.z=s.z,n.w=s.w,n}function f(s,n){var a=new o(s),d=n&&n.state,l=function(){return(a.next()>>>0)/4294967296};return l.double=function(){do var c=a.next()>>>11,h=(a.next()>>>0)/4294967296,p=(c+h)/(1<<21);while(p===0);return p},l.int32=a.next,l.quick=l,d&&(typeof d=="object"&&u(d,a),l.state=function(){return u(a,{})}),l}r&&r.exports?r.exports=f:this.xor128=f})(Dn,t)})(at)),at.exports}var lt={exports:{}},In=lt.exports,Zt;function Nn(){return Zt||(Zt=1,(function(t){(function(e,r,i){function o(s){var n=this,a="";n.next=function(){var l=n.x^n.x>>>2;return n.x=n.y,n.y=n.z,n.z=n.w,n.w=n.v,(n.d=n.d+362437|0)+(n.v=n.v^n.v<<4^(l^l<<1))|0},n.x=0,n.y=0,n.z=0,n.w=0,n.v=0,s===(s|0)?n.x=s:a+=s;for(var d=0;d<a.length+64;d++)n.x^=a.charCodeAt(d)|0,d==a.length&&(n.d=n.x<<10^n.x>>>4),n.next()}function u(s,n){return n.x=s.x,n.y=s.y,n.z=s.z,n.w=s.w,n.v=s.v,n.d=s.d,n}function f(s,n){var a=new o(s),d=n&&n.state,l=function(){return(a.next()>>>0)/4294967296};return l.double=function(){do var c=a.next()>>>11,h=(a.next()>>>0)/4294967296,p=(c+h)/(1<<21);while(p===0);return p},l.int32=a.next,l.quick=l,d&&(typeof d=="object"&&u(d,a),l.state=function(){return u(a,{})}),l}r&&r.exports?r.exports=f:this.xorwow=f})(In,t)})(lt)),lt.exports}var ut={exports:{}},qn=ut.exports,Yt;function Tn(){return Yt||(Yt=1,(function(t){(function(e,r,i){function o(s){var n=this;n.next=function(){var d=n.x,l=n.i,c,h;return c=d[l],c^=c>>>7,h=c^c<<24,c=d[l+1&7],h^=c^c>>>10,c=d[l+3&7],h^=c^c>>>3,c=d[l+4&7],h^=c^c<<7,c=d[l+7&7],c=c^c<<13,h^=c^c<<9,d[l]=h,n.i=l+1&7,h};function a(d,l){var c,h=[];if(l===(l|0))h[0]=l;else for(l=""+l,c=0;c<l.length;++c)h[c&7]=h[c&7]<<15^l.charCodeAt(c)+h[c+1&7]<<13;for(;h.length<8;)h.push(0);for(c=0;c<8&&h[c]===0;++c);for(c==8?h[7]=-1:h[c],d.x=h,d.i=0,c=256;c>0;--c)d.next()}a(n,s)}function u(s,n){return n.x=s.x.slice(),n.i=s.i,n}function f(s,n){s==null&&(s=+new Date);var a=new o(s),d=n&&n.state,l=function(){return(a.next()>>>0)/4294967296};return l.double=function(){do var c=a.next()>>>11,h=(a.next()>>>0)/4294967296,p=(c+h)/(1<<21);while(p===0);return p},l.int32=a.next,l.quick=l,d&&(d.x&&u(d,a),l.state=function(){return u(a,{})}),l}r&&r.exports?r.exports=f:this.xorshift7=f})(qn,t)})(ut)),ut.exports}var ct={exports:{}},zn=ct.exports,Qt;function Fn(){return Qt||(Qt=1,(function(t){(function(e,r,i){function o(s){var n=this;n.next=function(){var d=n.w,l=n.X,c=n.i,h,p;return n.w=d=d+1640531527|0,p=l[c+34&127],h=l[c=c+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=l[c]=p^h,n.i=c,p+(d^d>>>16)|0};function a(d,l){var c,h,p,x,y,_=[],w=128;for(l===(l|0)?(h=l,l=null):(l=l+"\0",h=0,w=Math.max(w,l.length)),p=0,x=-32;x<w;++x)l&&(h^=l.charCodeAt((x+32)%l.length)),x===0&&(y=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,x>=0&&(y=y+1640531527|0,c=_[x&127]^=h+y,p=c==0?p+1:0);for(p>=128&&(_[(l&&l.length||0)&127]=-1),p=127,x=512;x>0;--x)h=_[p+34&127],c=_[p=p+1&127],h^=h<<13,c^=c<<17,h^=h>>>15,c^=c>>>12,_[p]=h^c;d.w=y,d.X=_,d.i=p}a(n,s)}function u(s,n){return n.i=s.i,n.w=s.w,n.X=s.X.slice(),n}function f(s,n){s==null&&(s=+new Date);var a=new o(s),d=n&&n.state,l=function(){return(a.next()>>>0)/4294967296};return l.double=function(){do var c=a.next()>>>11,h=(a.next()>>>0)/4294967296,p=(c+h)/(1<<21);while(p===0);return p},l.int32=a.next,l.quick=l,d&&(d.X&&u(d,a),l.state=function(){return u(a,{})}),l}r&&r.exports?r.exports=f:this.xor4096=f})(zn,t)})(ct)),ct.exports}var ht={exports:{}},On=ht.exports,Jt;function Rn(){return Jt||(Jt=1,(function(t){(function(e,r,i){function o(s){var n=this,a="";n.next=function(){var l=n.b,c=n.c,h=n.d,p=n.a;return l=l<<25^l>>>7^c,c=c-h|0,h=h<<24^h>>>8^p,p=p-l|0,n.b=l=l<<20^l>>>12^c,n.c=c=c-h|0,n.d=h<<16^c>>>16^p,n.a=p-l|0},n.a=0,n.b=0,n.c=-1640531527,n.d=1367130551,s===Math.floor(s)?(n.a=s/4294967296|0,n.b=s|0):a+=s;for(var d=0;d<a.length+20;d++)n.b^=a.charCodeAt(d)|0,n.next()}function u(s,n){return n.a=s.a,n.b=s.b,n.c=s.c,n.d=s.d,n}function f(s,n){var a=new o(s),d=n&&n.state,l=function(){return(a.next()>>>0)/4294967296};return l.double=function(){do var c=a.next()>>>11,h=(a.next()>>>0)/4294967296,p=(c+h)/(1<<21);while(p===0);return p},l.int32=a.next,l.quick=l,d&&(typeof d=="object"&&u(d,a),l.state=function(){return u(a,{})}),l}r&&r.exports?r.exports=f:this.tychei=f})(On,t)})(ht)),ht.exports}var dt={exports:{}};const Xn={},Bn=Object.freeze(Object.defineProperty({__proto__:null,default:Xn},Symbol.toStringTag,{value:"Module"})),Kn=Oe(Bn);var Gn=dt.exports,Wt;function Un(){return Wt||(Wt=1,(function(t){(function(e,r,i){var o=256,u=6,f=52,s="random",n=i.pow(o,u),a=i.pow(2,f),d=a*2,l=o-1,c;function h(v,m,P){var S=[];m=m==!0?{entropy:!0}:m||{};var E=_(y(m.entropy?[v,g(r)]:v??w(),3),S),L=new p(S),k=function(){for(var C=L.g(u),N=n,A=0;C<a;)C=(C+A)*o,N*=o,A=L.g(1);for(;C>=d;)C/=2,N/=2,A>>>=1;return(C+A)/N};return k.int32=function(){return L.g(4)|0},k.quick=function(){return L.g(4)/4294967296},k.double=k,_(g(L.S),r),(m.pass||P||function(C,N,A,D){return D&&(D.S&&x(D,L),C.state=function(){return x(L,{})}),A?(i[s]=C,N):C})(k,E,"global"in m?m.global:this==i,m.state)}function p(v){var m,P=v.length,S=this,E=0,L=S.i=S.j=0,k=S.S=[];for(P||(v=[P++]);E<o;)k[E]=E++;for(E=0;E<o;E++)k[E]=k[L=l&L+v[E%P]+(m=k[E])],k[L]=m;(S.g=function(C){for(var N,A=0,D=S.i,B=S.j,F=S.S;C--;)N=F[D=l&D+1],A=A*o+F[l&(F[D]=F[B=l&B+N])+(F[B]=N)];return S.i=D,S.j=B,A})(o)}function x(v,m){return m.i=v.i,m.j=v.j,m.S=v.S.slice(),m}function y(v,m){var P=[],S=typeof v,E;if(m&&S=="object")for(E in v)try{P.push(y(v[E],m-1))}catch{}return P.length?P:S=="string"?v:v+"\0"}function _(v,m){for(var P=v+"",S,E=0;E<P.length;)m[l&E]=l&(S^=m[l&E]*19)+P.charCodeAt(E++);return g(m)}function w(){try{var v;return c&&(v=c.randomBytes)?v=v(o):(v=new Uint8Array(o),(e.crypto||e.msCrypto).getRandomValues(v)),g(v)}catch{var m=e.navigator,P=m&&m.plugins;return[+new Date,e,P,e.screen,g(r)]}}function g(v){return String.fromCharCode.apply(0,v)}if(_(i.random(),r),t.exports){t.exports=h;try{c=Kn}catch{}}else i["seed"+s]=h})(typeof self<"u"?self:Gn,[],Math)})(dt)),dt.exports}var bt,te;function Vn(){if(te)return bt;te=1;var t=Ln(),e=jn(),r=Nn(),i=Tn(),o=Fn(),u=Rn(),f=Un();return f.alea=t,f.xor128=e,f.xorwow=r,f.xorshift7=i,f.xor4096=o,f.tychei=u,bt=f,bt}var Hn=Vn();const Zn=Re(Hn),ee=.3,Yn=.3,Qn=.3,Jn=vt({__name:"global-bottom",setup(t){Fe();const{currentSlideRoute:e}=$t(),r=I(()=>e.value.meta?.slide?.frontmatter||{}),i=I(()=>r.value.glow||"full"),o=I(()=>+(r.value.glowOpacity??.4)),u=I(()=>+(r.value.glowHue||0)),f=I(()=>r.value.glowSeed==="false"||r.value.glowSeed===!1?Date.now().toString():r.value.glowSeed||"default");function s(h){let y=[-.2,1.2],_=[-.2,1.2];function w(v,m){return[Math.max(v[0],m[0]),Math.min(v[1],m[1])]}const g=h.split("-");for(const v of g)switch(v){case"topmost":_=w(_,[-.5,0]);break;case"top":_=w(_,[-.2,.6]);break;case"bottom":_=w(_,[.4,1.2]);break;case"left":y=w(y,[-.2,.6]);break;case"right":y=w(y,[.4,1.2]);break;case"xcenter":y=w(y,[.25,.75]);break;case"ycenter":_=w(_,[.25,.75]);break;case"center":y=w(y,[.25,.75]),_=w(_,[.25,.75]);break;case"full":y=w(y,[0,1]),_=w(_,[0,1]);break}return{x:y,y:_}}function n([h,p],[x,y]){return(x-h)**2+(y-p)**2}function a(h=16){function p(){const w=s(i.value),g=Zn(`${f.value}-${e.value.no}`);function v([P,S]){return g()*(S-P)+P}function m(P,S){return P=P*(1+S*2)-S,g()<Qn?P+(g()-.5)*Yn:P}return Array.from({length:h}).fill(0).map(()=>[m(v(w.x),ee),m(v(w.y),ee)])}const x=O(p()),y=I(()=>x.value.map(([w,g])=>`${w*100}% ${g*100}%`).join(", "));function _(){const w=new Set(p());x.value=x.value.map(g=>{let v=Number.POSITIVE_INFINITY,m;for(const P of w){const S=n(g,P);S<v&&(v=S,m=P)}return w.delete(m),m})}return re(e,()=>{_()}),y}const d=a(10),l=a(6),c=a(3);return(h,p)=>(Q(),st("div",null,[X("div",{class:"bg transform-gpu overflow-hidden pointer-events-none",style:U({filter:`blur(70px) hue-rotate(${u.value}deg)`}),"aria-hidden":"true"},[X("div",{class:"clip bg-gradient-to-r from-[#18549a] to-[#12238b]",style:U({"clip-path":`polygon(${V(d)})`,opacity:o.value})},null,4),X("div",{class:"clip bg-gradient-to-l from-[#18549a] to-[#12238b]",style:U({"clip-path":`polygon(${V(l)})`,opacity:o.value})},null,4),X("div",{class:"clip bg-gradient-to-t from-[#01b6d1] to-[#aaf7ff]",style:U({"clip-path":`polygon(${V(c)})`,opacity:.2})},null,4)],4)]))}}),Wn=Ct(Jn,[["__scopeId","data-v-924d089d"]]),tr=[Object.values([])[0],Object.values([])[0]].filter(Boolean),pr={render:()=>tr.map(t=>gt(t))},er=[Object.values([])[0],Object.values([Wn])[0]].filter(Boolean),vr={render:()=>er.map(t=>gt(t))},nr=[Object.values([])[0],Object.values([])[0]].filter(Boolean),rr={render:()=>nr.map(t=>gt(t))},sr=[Object.values([])[0],Object.values([])[0]].filter(Boolean),ir={render:()=>sr.map(t=>gt(t))},or=["data-slidev-no","lang"],ar=vt({__name:"SlideWrapper",props:{clicksContext:{type:Object,required:!0},renderContext:{type:String,default:"slide"},route:{type:Object,required:!0}},setup(t){const e=t,r=I(()=>e.route.meta?.slide?.frontmatter.zoom??1);G(De,e.route),G(je,e.route.meta.slide.frontmatter),G(Ie,O(e.route.no)),G(Ne,O(e.renderContext)),G(qe,we(e,"clicksContext")),G(Te,r);const i=I(()=>({"user-select":St.selectable?void 0:"none","--slidev-slide-zoom-scale":r.value===1?void 0:r.value}));return(o,u)=>(Q(),st("div",{"data-slidev-no":e.route.no,class:_e(V(ze)(t.route,["slide","presenter"].includes(e.renderContext)?"":"disable-view-transition")),style:U(i.value),lang:e.route.meta.slide.frontmatter.lang},[jt(V(ir)),(Q(),be(Se(e.route.component))),jt(V(rr))],14,or))}}),gr=Ct(ar,[["__scopeId","data-v-9aa8a1e5"]]);export{vr as G,gr as S,dr as _,fr as a,pr as b,xn as u};
