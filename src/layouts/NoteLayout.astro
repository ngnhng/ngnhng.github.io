---
import TOC from "../components/TOC.astro";

const { frontmatter, headings } = Astro.props;
const { title, pubDate, tags } = frontmatter;
---

<div class="flex flex-col items-center">
  <div class="mb-8 gap-y-4 sm:gap-y-6 sm:mb-10 flex flex-col items-center">
    <h1
      class="text-4xl font-bold text-font-color dark:text-font-invert text-center"
    >
      {title}
    </h1>
    {
      pubDate && (
        <p class="text-sm text-gray-500 dark:text-gray-400 w-full">
          {pubDate
            ? new Date(pubDate).toLocaleDateString("en-US", {
                year: "numeric",
                month: "long",
              })
            : ""}
        </p>
      )
    }
    {
      tags && tags.length > 0 && (
        <div class="flex flex-wrap gap-2 mt-2 w-full">
          {tags.map((tag: any) => (
            <span class="text-xs font-medium text-gray-500 bg-gray-200 dark:bg-gray-700 dark:text-gray-300 rounded-full px-2 py-1">
              {tag}
            </span>
          ))}
        </div>
      )
    }
  </div>
  <div class="flex w-full max-w-7xl px-4 md:mt-20">
    <aside class="hidden md:block md:w-1/4 lg:w-1/5 sticky top-20 h-screen">
      <div class="sticky top-20 mr-10">
        <TOC headings={headings} />
      </div>
    </aside>
    <div class="w-full md:w-3/4 lg:w-4/5">
      <article
        class:list={[
          "prose prose-slate mb-8 break-words text-font-color dark:prose-invert sm:mb-10",
          "prose-h2:text-3xl prose-h3:text-2xl prose-h4:text-xl prose-h5:text-lg prose-h6:text-lg prose-p:text-lg",
          "font-serif prose-headings:font-sans",
          "prose-hr:mx-auto prose-hr:w-1/2 sm:prose-code:text-wrap",
          "dark:selection:text-white",
          "prose-h1:scroll-mt-20",
          "prose-h2:scroll-mt-20",
          "prose-h3:scroll-mt-20",
          "prose-h4:scroll-mt-20",
          "prose-h5:scroll-mt-20",
          "prose-h6:scroll-mt-20",
        ]}
      >
        <slot />
      </article>
    </div>
  </div>
</div>
